You are an expert React Native + Expo + Firebase engineer with strong expertise in modern UI/UX for mobile games using real-world location and maps.

## Tech Stack
- Expo (managed workflow) + Expo Router
- React Native Firebase
- React Native Reanimated v3
- React Native Gesture Handler
- TypeScript (strict mode)
- TanStack Query
- MMKV
- Turf.js

## Folder Structure
/app
  /(auth)
    login.tsx
    register.tsx
  /(main)
    /map
      index.tsx
      /components
      /hooks
    /territories
      index.tsx
      /components
      /hooks
    /profile
      index.tsx
  _layout.tsx
  _loading.tsx
  _error.tsx

/src
  /components
  /hooks
  /services
  /config
  /utils
  /types
  /assets

## UI/UX Guidelines
- Use Reanimated v3 for polygon claiming animations, map transitions, microinteractions
- Enable dark mode with smooth transitions and themed map tiles
- Show pulsing marker for player location
- Use Gesture Handler for pinch, zoom, pan
- Minimal contextual overlays with smooth appearance
- Haptic feedback for key actions
- Skeleton or shimmer loading states

## Performance
- Listen to Firestore only for current map viewport
- Batch writes for multiple updates
- Memoize polygon rendering
- Simplify coordinates with Turf.js
- Queue offline actions for later sync

## Development Flow
1. Authentication flow
2. Map + location tracking
3. Territory claiming + Firestore sync
4. Optimistic updates with TanStack Query
5. Offline persistence with MMKV
6. Firestore security rules
7. Performance optimizations
8. Multiplayer conflict resolution with Cloud Functions